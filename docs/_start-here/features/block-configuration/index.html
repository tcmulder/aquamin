<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Block Configuration - aquamin Docs</title> <link rel="shortcut icon" href="/aquamin/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/aquamin/assets/css/just-the-docs-default.css"> <script src="/aquamin/assets/js/vendor/lunr.min.js"></script> <script src="/aquamin/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Block Configuration | aquamin Docs</title> <meta name="generator" content="Jekyll v4.3.1" /> <meta property="og:title" content="Block Configuration" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Documentation for the aquamin WordPress starter theme.." /> <meta property="og:description" content="Documentation for the aquamin WordPress starter theme.." /> <link rel="canonical" href="http://localhost:4001/aquamin/features/block-configuration/" /> <meta property="og:url" content="http://localhost:4001/aquamin/features/block-configuration/" /> <meta property="og:site_name" content="aquamin Docs" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Block Configuration" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Documentation for the aquamin WordPress starter theme..","headline":"Block Configuration","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4001/aquamin/assets/images/screenshot.png"}},"url":"http://localhost:4001/aquamin/features/block-configuration/"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/aquamin/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/aquamin/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/aquamin/quickstart/" class="nav-list-link">Quickstart</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander" aria-label="toggle links in Features category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/aquamin/features/" class="nav-list-link">Features</a><ul class="nav-list "><li class="nav-list-item active"><a href="/aquamin/features/block-configuration/" class="nav-list-link active">Block Configuration</a></li><li class="nav-list-item "><a href="/aquamin/features/theme-configuration/" class="nav-list-link">Theme Configuration</a></li><li class="nav-list-item "><a href="/aquamin/features/wp-cli/" class="nav-list-link">WP-CLI Commands</a></li><li class="nav-list-item "><a href="/aquamin/features/requirements/" class="nav-list-link">Requirements</a></li></ul></li><li class="nav-list-item"><a href="/aquamin/credits/" class="nav-list-link">Credits</a></li><li class="nav-list-item"><a href="/aquamin/changelog/" class="nav-list-link">Changelog</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search aquamin Docs" aria-label="Search aquamin Docs" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/aquamin/features/">Features</a></li> <li class="breadcrumb-nav-list-item"><span>Block Configuration</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="block-configuration"> <a href="#block-configuration" class="anchor-heading" aria-labelledby="block-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Block Configuration </h1> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#aquamins-block-philosophy" id="markdown-toc-aquamins-block-philosophy">Aquaminâ€™s Block Philosophy</a></li> <li><a href="#creating-blocks" id="markdown-toc-creating-blocks">Creating Blocks</a> <ol> <li><a href="#front-end-javascript-option" id="markdown-toc-front-end-javascript-option">Front-End JavaScript Option</a></li> <li><a href="#inner-blocks-option" id="markdown-toc-inner-blocks-option">Inner Blocks Option</a></li> <li><a href="#dynamic-block-option" id="markdown-toc-dynamic-block-option">Dynamic Block Option</a></li> </ol> </li> <li><a href="#anatomy-of-a-block" id="markdown-toc-anatomy-of-a-block">Anatomy of a Block</a> <ol> <li><a href="#directory-structure" id="markdown-toc-directory-structure">Directory Structure</a></li> </ol> </li> <li><a href="#deleting-blocks" id="markdown-toc-deleting-blocks">Deleting Blocks</a></li> <li><a href="#reusable-block-features" id="markdown-toc-reusable-block-features">Reusable Block Features</a></li> <li><a href="#imports" id="markdown-toc-imports">Imports</a></li> </ol><hr /> <h2 id="aquamins-block-philosophy"> <a href="#aquamins-block-philosophy" class="anchor-heading" aria-labelledby="aquamins-block-philosophy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Aquaminâ€™s Block Philosophy </h2> <p>Aquaminâ€™s goal is to make it <em>really</em> easy to create blocks, remove them, or transfer them to future aquamin-themed sites. In order to accomplish this, each block is itâ€™s own self-contained directory, with all files necessary for it to function contained within that directory.</p> <p>Thereâ€™s no configuration you need to do outside of that directory to get the block working, and all your development occurs within that directory so you can spend less time tracking down files across the themeâ€™s filesystem. If you want to move that block to another aquamin-compatible site in the future, you need only copy and paste itâ€™s directory into the new site (and then tweak styling to match the new site). And if you decide to get rid of a block, simply delete itâ€™s directory, and itâ€™ll leave behind no extra code bloat across other files in the themeâ€”itâ€™s 100% gone. Easy peasy!</p> <h2 id="creating-blocks"> <a href="#creating-blocks" class="anchor-heading" aria-labelledby="creating-blocks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating Blocks </h2> <p>The easiest way to create blocks is to run <code class="language-plaintext highlighter-rouge">wp aquamin block</code> (<a href="/aquamin/features/wp-cli/#wp-aquamin-block">see the docs</a>). If you have parcel running, just refresh WordPress and the scaffolded block will immediately be available as a registered block, ready for you to customize within its own directory in <code class="language-plaintext highlighter-rouge">aquamin/blocks/block-library/</code>.</p> <blockquote> <p><em>Note:</em> If you would prefer not to use WP-CLI, simply copy the appropriate block scaffold directory out of <code class="language-plaintext highlighter-rouge">aquamin/includes/cli/templates/</code> and conduct a find and replace for the various â€œtemplateâ€ placeholder strings youâ€™ll find within its files.</p> </blockquote> <h3 id="front-end-javascript-option"> <a href="#front-end-javascript-option" class="anchor-heading" aria-labelledby="front-end-javascript-option"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Front-End JavaScript Option </h3> <p>The <code class="language-plaintext highlighter-rouge">wp aquamin block</code> command will ask if you want to add a <code class="language-plaintext highlighter-rouge">script.js</code> file to your block that will be immediately available for front-end scripting. (Under the hood, <code class="language-plaintext highlighter-rouge">aquamin/blocks/blocks.js</code> is simply importing all <code class="language-plaintext highlighter-rouge">./block-library/*/script.js</code> files, so you can easily remove or add <code class="language-plaintext highlighter-rouge">script.js</code> files later.)</p> <p>If youâ€™d like to break the front-end scripts into multiple files, you can use this <code class="language-plaintext highlighter-rouge">script.js</code> file as an entry point and organize your additional files as desired within the blockâ€™s directory.</p> <h3 id="inner-blocks-option"> <a href="#inner-blocks-option" class="anchor-heading" aria-labelledby="inner-blocks-option"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Inner Blocks Option </h3> <p>The <code class="language-plaintext highlighter-rouge">wp aquamin block</code> command will ask if youâ€™d like an inner block set up. This is a common pattern if your parent block requires a codependent inner block (e.g. a Slider parent block with multiple Slide inner blocks).</p> <p>Youâ€™ll add styles and scripts to your inner block via itâ€™s <em>parentâ€™s</em> <code class="language-plaintext highlighter-rouge">style.css</code> and optional <code class="language-plaintext highlighter-rouge">script.js</code> files, rather than within the inner blockâ€™s directory. This simplifies things by eliminating the need to jump between multiple files to develop blocks that are so tightly coupled anyway (see <a href="#anatomy-of-a-block">Anatomy of a Block</a> for more details).</p> <h3 id="dynamic-block-option"> <a href="#dynamic-block-option" class="anchor-heading" aria-labelledby="dynamic-block-option"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dynamic Block Option </h3> <p>Though aquamin prefers blocks be built with JavaScript, in some cases blocks require up-to-date data from the database, and therefore require PHP. So, <code class="language-plaintext highlighter-rouge">wp aquamin block</code> will ask if you need a dynamic block, and will create a <code class="language-plaintext highlighter-rouge">markup.php</code> file to facilitate your edits. (Note that it doesnâ€™t currently provide automated inner block setup if you choose to go dynamic: if you need that, youâ€™ll have to add your dynamic inner block manually.)</p> <h2 id="anatomy-of-a-block"> <a href="#anatomy-of-a-block" class="anchor-heading" aria-labelledby="anatomy-of-a-block"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Anatomy of a Block </h2> <p>Each block has its own block directory within the <code class="language-plaintext highlighter-rouge">aquamin/blocks/block-library/</code> directory. All the blockâ€™s files are contained within its block directory. Note that inner blocks use the parent blockâ€™s <code class="language-plaintext highlighter-rouge">editor.css</code>, <code class="language-plaintext highlighter-rouge">style.css</code>, and optional <code class="language-plaintext highlighter-rouge">script.js</code> files so you neednâ€™t jump between so many files while youâ€™re working on the block as a whole.</p> <h3 id="directory-structure"> <a href="#directory-structure" class="anchor-heading" aria-labelledby="directory-structure"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Directory Structure </h3> <div class="language-plaintext short-line-height highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ğŸ“‚ blocks
â”— ğŸ“‚ block-library         // all blocks reside within blocks/block-library/*
   â”— ğŸ“‚ example-block      // the block's unique name
      â”£ ğŸ“„ block.json      // details about block registration
      â”£ ğŸ“„ edit.js         // HTML shown in the block editor
      â”£ ğŸ“„ editor.css      // styling for block editor (also imports front-end's style.css)
      â”£ ğŸ“„ index.js        // block entry file (mostly imports other files)
      â”£ ğŸ“„ index.php       // PHP block registration (and optionally inner block registration)
      â”£ ğŸ“„ markup.php      // optional PHP for a dynamic block
      â”£ ğŸ“„ save.js         // HTML saved to database
      â”£ ğŸ“„ script.js       // optional front-end script for the block
      â”£ ğŸ“„ style.css       // front-end styling
      â”— ğŸ“‚ inner-block     // nested block used only by the parent block (optional)
         â”£ ğŸ“„ block.json   // details about inner block registration
         â”£ ğŸ“„ edit.js      // HTML shown in the block editor
         â”£ ğŸ“„ index.js     // block entry file (mostly imports other files)
         â”— ğŸ“„ save.js      // HTML saved to database
</code></pre></div></div> <blockquote> <p><em>Note:</em> The <code class="language-plaintext highlighter-rouge">aquamin/blocks/blocks.js</code> and <code class="language-plaintext highlighter-rouge">aquamin/blocks/editor.js</code> files import file glob patterns (e.g. <code class="language-plaintext highlighter-rouge">./block-library/*/index.js</code>) to make it easy to add blocksâ€”as soon as you add a new block directory, parcel takes care of registering it with WordPress without further coding. Because of this, all files within block directories <em>must</em> be named as shown here.</p> </blockquote> <h2 id="deleting-blocks"> <a href="#deleting-blocks" class="anchor-heading" aria-labelledby="deleting-blocks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Deleting Blocks </h2> <p>Thereâ€™s currently a bug in Parcel. If you delete a blockâ€™s directory to remove the block, youâ€™ll need to exit parcel and run <code class="language-plaintext highlighter-rouge">npm run clean</code> to clear the cache, then <code class="language-plaintext highlighter-rouge">npm run start</code> to restart the server; after that, your block will be removed from WordPressâ€™s registered bocks. You can run <code class="language-plaintext highlighter-rouge">npm run clean &amp;&amp; npm run start</code> if you would like to clear the cache immediately before starting the build server each time.</p> <blockquote> <p><em>Note:</em> if you <em>donâ€™t</em> do this and you delete a file Parcel was watching, builds will fail. Maybe future releases of Parcel will eliminate this requirement. It appears to happen when one file imports another, but then the imported file later gets deleted: Parcel continues to look for that deleted fileâ€”even after restartingâ€”if you donâ€™t clear its cache first.</p> </blockquote> <h2 id="reusable-block-features"> <a href="#reusable-block-features" class="anchor-heading" aria-labelledby="reusable-block-features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Reusable Block Features </h2> <p>Youâ€™ll find some helpful, reusable utilities and UI components under <code class="language-plaintext highlighter-rouge">aquamin/blocks/util</code> and <code class="language-plaintext highlighter-rouge">aquamin/blocks/ui</code>, respectively. You can add your own into these directories as well, or ignore them if theyâ€™re not helpful to you: anything you donâ€™t use wonâ€™t get bundled into the production build anyway.</p> <h2 id="imports"> <a href="#imports" class="anchor-heading" aria-labelledby="imports"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Imports </h2> <p>Youâ€™ll notice weâ€™re importing some libraries but destructuring the <code class="language-plaintext highlighter-rouge">wp</code> object for most WordPress features. For example:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// we can import node_modules packages:</span>
<span class="k">import</span> <span class="nx">classnames</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">classnames</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// we can import components from files:</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ButtonX</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../Buttons</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// but we can't import from WordPress's node_module packages i.e.:</span>
<span class="c1">// import {  InspectorControls } from '@wordpress/block-editor';</span>
<span class="c1">// because that would cause two conflicting versions of the</span>
<span class="c1">// wp object to exist. Instead, we need to destructure from the</span>
<span class="c1">// existing wp object:</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">MediaPlaceholder</span><span class="p">,</span> <span class="nx">InspectorControls</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">wp</span><span class="p">.</span><span class="nx">blockEditor</span><span class="p">;</span>
</code></pre></div></div> <p>Many examples youâ€™ll see online just <code class="language-plaintext highlighter-rouge">import</code> everything, but I was unable to get Parcel to behave like Webpack and properly use the <code class="language-plaintext highlighter-rouge">wp</code> object without it being imported twice (and therefore throwing all manner of errors). So, until I can find a viable workaround for Parcel, if youâ€™re following an example online that shows <code class="language-plaintext highlighter-rouge">import { InspectorControls } from '@wordpress/block-editor'</code>, youâ€™ll simply change it to <code class="language-plaintext highlighter-rouge">const { InspectorControls } = wp.blockEditor</code></p> <hr> <footer> Copyright &copy;<span id="current-year">2022</span> <a href="https://www.thinkaquamarine.com" target="_blank"> Aquamarine Limited </a>. Distributed by an <a href="http://www.gnu.org/licenses/gpl-2.0.html" target="_blank"> GPLv2 license </a> or later. <script> document.getElementById('current-year').innerHTML = new Date().getFullYear(); </script> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
